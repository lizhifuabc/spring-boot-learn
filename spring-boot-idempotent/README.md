# 数据库保障幂等性
1. 首先执行查询操作(并发时无效)
2. 数据库的唯一性索引(在最终的阶段保障不会出问题)
3. 单独维护一张少字段表，在接受请求的时候只插入，能够插入才能进行下一步
   1. 少字段
   2. 定期释放表空间
4. 乐观锁(状态机控制)
   1. 增加单独控制字段version
   2. 可以增加一个状态字段，保障不会重复消费

# Redis

1. token机制保障无重复请求
2. LUA表达式